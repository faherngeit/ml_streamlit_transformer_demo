/*! For license information please see 29.4a243cb0.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[29],{1179:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=r()("label",{target:"effi0qh0"})((function(e){var t=e.theme;return{fontSize:t.fontSizes.smDefault,color:t.colors.bodyText,marginBottom:t.fontSizes.halfSmDefault}}),""),l=r()("div",{target:"effi0qh1"})((function(e){var t=e.theme;return{fontSize:t.fontSizes.smDefault,color:t.colors.gray,margin:t.spacing.none,textAlign:"right",position:"absolute",bottom:0,right:t.fontSizes.halfSmDefault}}),"");n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return i}))},3779:function(e,t,n){"use strict";n.r(t);var a,r,i=n(229),l=n(9),o=n(21),s=n(22),c=n(0),u=n.n(c),m=n(151),d=n.n(m),g=n(42);!function(e){e.ERROR="ERROR",e.DELETING="DELETING",e.READY="READY",e.UPLOADING="UPLOADING",e.UPLOADED="UPLOADED"}(a||(a={})),function(e){e.GigaByte="gb",e.KiloByte="kb",e.MegaByte="mb",e.Byte="b"}(r||(r={}));var f=Object(g.g)()?1024:1e3,p=[r.GigaByte,r.MegaByte,r.KiloByte,r.Byte],v=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n||(n=r.Byte),a<0&&(a=0),t<0)throw new Error("Size must be greater than or equal to 0");var i=p.indexOf(n),l=t/f;return i&&t>f/2?e(l,p[i-1],a):"".concat(t.toFixed(a)).concat(n.toUpperCase())},h=function(e,t,n){if(e<0)throw Error("Size must be 0 or greater");var a=p.findIndex((function(e){return e===t})),r=p.findIndex((function(e){return e===n}));if(-1===a||-1===r)throw Error("Unexpected byte unit provided");if(a===r)return e;var i=Math.abs(a-r),l=Math.pow(f,i);return a>r?e/l:e*l},E=n(1179),x=n(43),y=n(2444),S=n.n(y),b=n(23),D=n(5),O=n.n(D);var R,z=O()("section",{target:"exg6vvm0"})((function(e){var t=e.isDisabled,n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing.lg,backgroundColor:n.inSidebar?n.colors.white:n.colors.lightestGray,borderRadius:n.radii.md,":focus":{outline:"none",boxShadow:"0 0 0 1px ".concat(n.colors.primary)},color:t?n.colors.gray:n.colors.bodyText}}),""),w=O()("div",{target:"exg6vvm1"})((function(e){e.theme;return{marginRight:"auto",alignItems:"center",display:"flex"}}),""),B=O()("span",{target:"exg6vvm2"})((function(e){var t=e.theme;return{color:t.colors.secondary,marginRight:t.spacing.lg}}),""),M=O()("span",{target:"exg6vvm3"})((function(e){return{marginBottom:e.theme.spacing.twoXS}}),""),F=O()("div",{target:"exg6vvm4"})({name:"j7qwjs",styles:"display:flex;flex-direction:column;"}),j=O()("div",{target:"exg6vvm5"})((function(e){var t=e.theme;return{left:0,right:0,lineHeight:t.lineHeights.tight,paddingTop:t.spacing.md,paddingLeft:t.spacing.lg,paddingRight:t.spacing.lg}}),""),k=O()("ul",{target:"exg6vvm6"})((function(e){e.theme;return{listStyleType:"none"}}),""),A=O()("li",{target:"exg6vvm7"})((function(e){var t=e.theme;return{margin:t.spacing.none,padding:t.spacing.none}}),""),I=O()("div",{target:"exg6vvm8"})((function(e){return{display:"flex",alignItems:"baseline",flex:1,paddingLeft:e.theme.spacing.lg,overflow:"hidden"}}),""),C=O()("div",{target:"exg6vvm9"})((function(e){var t=e.theme;return{marginRight:t.spacing.sm,marginBottom:t.spacing.twoXS,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),""),L=O()("div",{target:"exg6vvm10"})((function(e){return{display:"flex",alignItems:"center",marginBottom:e.theme.spacing.twoXS}}),""),N=O()("span",{target:"exg6vvm11"})((function(e){return{marginRight:e.theme.spacing.twoXS}}),""),U=O()("div",{target:"exg6vvm12"})((function(e){var t=e.theme;return{display:"flex",padding:t.spacing.twoXS,color:t.colors.secondary}}),""),P=O()("small",{target:"exg6vvm13"})((function(e){var t=e.theme;return{color:t.colors.danger,fontSize:t.fontSizes.smDefault,height:t.fontSizes.smDefault,lineHeight:t.fontSizes.smDefault,display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),""),T=O()("span",{target:"exg6vvm14"})({name:"0",styles:""}),G=function(e){return{[z]:{display:"flex",flexDirection:"column",alignItems:"flex-start"},[w]:{marginBottom:e.spacing.lg},[B]:{display:"none"},[j]:{paddingRight:e.spacing.lg},[L]:{maxWidth:"inherit",flex:1,alignItems:"flex-start",marginBottom:e.spacing.sm},[C]:{width:e.sizes.full},[I]:{flexDirection:"column"},[P]:{height:"auto",whiteSpace:"initial"},[T]:{display:"none"},[A]:{margin:e.spacing.none,padding:e.spacing.none}}},Y=O()("div",{target:"exg6vvm15"})((function(e){var t=e.theme;return t.inSidebar?G(t):{["@media (max-width: ".concat(t.breakpoints.sm,")")]:G(t)}}),""),X=n(1496),q=n(72);!function(e){e.SECONDARY="secondary",e.DANGER="danger"}(R||(R={}));var H=O()("small",{target:"euu6i2w0"})((function(e){var t=e.kind,n=e.theme,a=t===R.SECONDARY&&n.colors.secondary;return{color:t===R.DANGER&&n.colors.danger||a||n.colors.darkGray,fontSize:n.fontSizes.smDefault,height:n.fontSizes.smDefault,lineHeight:n.fontSizes.smDefault,display:"flex",alignItems:"center"}}),""),J=function(e){var t=e.multiple,n=e.acceptedExtensions,a=e.maxSizeBytes;return u.a.createElement(w,null,u.a.createElement(B,null,u.a.createElement(q.a,{content:X.CloudUpload,size:"threeXL"})),u.a.createElement(F,null,u.a.createElement(M,null,"Drag and drop file",t?"s":""," here"),u.a.createElement(H,null,"Limit ".concat(v(a,r.Byte,0)," per file"),n.length?" \u2022 ".concat(n.join(", ").replace(/\./g,"").toUpperCase()):null)))},K=function(e){var t=e.onDrop,n=e.multiple,a=e.acceptedExtensions,r=e.maxSizeBytes,i=e.disabled;return u.a.createElement(S.a,{onDrop:t,multiple:n,accept:a.length?a:void 0,maxSize:r,disabled:i},(function(e){var t=e.getRootProps,l=e.getInputProps;return u.a.createElement(z,Object.assign({},t(),{"data-testid":"stFileUploadDropzone",isDisabled:i}),u.a.createElement("input",l()),u.a.createElement(J,{multiple:n,acceptedExtensions:a,maxSizeBytes:r}),u.a.createElement(b.c,{kind:b.a.PRIMARY,disabled:i,size:b.b.SMALL},"Browse files"))}))},W=n(44),Q=n(143),V=n(84),Z=n.n(V),$=O()("div",{target:"e1f8s2qs0"})((function(e){var t=e.theme;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:t.spacing.twoXS,marginBottom:t.spacing.twoXS}}),""),_=O()("div",{target:"e1f8s2qs1"})((function(e){return{display:"flex",alignItems:"center",justifyContent:"center",color:e.theme.colors.secondary}}),""),ee=function(e){var t=e.className,n=e.currentPage,a=e.totalPages,r=e.onNext,i=e.onPrevious;return u.a.createElement($,{className:t},u.a.createElement(H,null,"Showing page ".concat(n," of ").concat(a)),u.a.createElement(_,null,u.a.createElement(b.c,{onClick:i,kind:b.a.MINIMAL},u.a.createElement(q.a,{content:X.ChevronLeft,size:"xl"})),u.a.createElement(b.c,{onClick:r,kind:b.a.MINIMAL},u.a.createElement(q.a,{content:X.ChevronRight,size:"xl"}))))},te=function(e,t){return Math.ceil(e.length/t)},ne=function(e){return Z()((function(t){var n=t.pageSize,a=t.items,r=t.resetOnAdd,i=Object(Q.a)(t,["pageSize","items","resetOnAdd"]),l=Object(c.useState)(0),o=Object(W.a)(l,2),s=o[0],m=o[1],d=Object(c.useState)(te(a,n)),g=Object(W.a)(d,2),f=g[0],p=g[1],v=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e}),[e]),t.current}(a);Object(c.useEffect)((function(){v&&v.length!==a.length&&p(te(a,n)),v&&v.length<a.length?r&&m(0):s+1>=f&&m(f-1)}),[a,s,n,v,r,f]);var h=a.slice(s*n,s*n+n);return u.a.createElement(u.a.Fragment,null,u.a.createElement(e,Object.assign({items:h},i)),a.length>n?u.a.createElement(ee,{className:"streamlit-paginator",pageSize:n,totalPages:f,currentPage:s+1,onNext:function(){m(Math.min(s+1,f-1))},onPrevious:function(){m(Math.max(0,s-1))}}):null)}),e)},ae=n(236),re=function(e){var t=e.file,n=e.progress;return n?u.a.createElement(ae.b,{value:n,size:ae.a.SMALL,overrides:{Bar:{style:{marginLeft:0,marginTop:"4px"}}}}):t.status===a.ERROR?u.a.createElement(P,null,u.a.createElement(N,{"data-testid":"stUploadedFileErrorMessage"},t.errorMessage||"error"),u.a.createElement(T,null,u.a.createElement(q.a,{content:X.Error,size:"lg"}))):t.status===a.UPLOADED?u.a.createElement(H,{kind:R.SECONDARY},v(t.size,r.Byte)):t.status===a.DELETING?u.a.createElement(H,{kind:R.SECONDARY},"Removing file"):null},ie=function(e){var t=e.file,n=e.progress,a=e.onDelete;return u.a.createElement(L,{className:"uploadedFile"},u.a.createElement(U,null,u.a.createElement(q.a,{content:X.InsertDriveFile,size:"twoXL"})),u.a.createElement(I,{className:"uploadedFileData"},u.a.createElement(C,{className:"uploadedFileName",title:t.name},t.name),u.a.createElement(re,{file:t,progress:n})),u.a.createElement(b.c,{onClick:function(){return a(t.id||"")},kind:b.a.MINIMAL},u.a.createElement(q.a,{content:X.Clear,size:"lg"})))},le=ne((function(e){var t=e.items,n=e.onDelete;return u.a.createElement(k,null,t.map((function(e){return u.a.createElement(A,{key:e.id},u.a.createElement(ie,{file:e,progress:e.progress,onDelete:n}))})))})),oe=function(e){return u.a.createElement(j,null,u.a.createElement(le,e))},se=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var o;Object(l.a)(this,n),(o=t.call(this,e)).componentDidUpdate=function(e){e.disabled!==o.props.disabled&&o.props.disabled&&o.reset();var t=o.props.element.maxUploadSizeMb;e.element.maxUploadSizeMb!==t&&o.setState({maxSizeBytes:h(t,r.MegaByte,r.Byte)})},o.reset=function(){o.setState({status:a.READY,errorMessage:void 0,files:[]})},o.dropHandler=function(e,t){var n=o.props.element.multipleFiles;if(!n&&o.state.files.length&&o.removeFile(o.state.files[0].id||""),o.props.uploadClient.updateFileCount(o.props.element.id,n?o.state.files.length+e.length:1),t.length>1&&!n){var a=t.findIndex((function(e){return 1===e.errors.length&&"too-many-files"===e.errors[0].code}));if(a>=0){var r=t[a];o.uploadFile(r.file,e.length),o.rejectFiles([].concat(Object(i.a)(t.slice(0,a)),Object(i.a)(t.slice(a+1))))}else o.rejectFiles(t)}else o.rejectFiles(t);e.map(o.uploadFile)},o.handleFile=function(e,t){return e.id="".concat(t).concat((new Date).getTime()),e.cancelToken=d.a.CancelToken.source(),o.setState((function(t){return{files:[e].concat(Object(i.a)(t.files))}})),e},o.uploadFile=function(e,t){e.progress=1,e.status=a.UPLOADING;var n=o.handleFile(e,t);o.props.uploadClient.uploadFiles(o.props.element.id,[e],(function(e){return o.onUploadProgress(e,n.id)}),e.cancelToken?e.cancelToken.token:d.a.CancelToken.source().token,!o.props.element.multipleFiles).then((function(){o.setState((function(t){return{files:t.files.map((function(t){return e.id===t.id?(delete e.progress,delete e.cancelToken,e.status=a.UPLOADED,e):t}))}}))})).catch((function(e){d.a.isCancel(e)||o.setState({status:"ERROR",errorMessage:e?e.toString():"Unknown error"})}))},o.rejectFiles=function(e){e.forEach((function(e,t){Object.assign(e.file,{status:a.ERROR,errorMessage:o.getErrorMessage(e.errors[0].code,e.file)}),o.handleFile(e.file,t)}))},o.getErrorMessage=function(e,t){switch(e){case"file-too-large":return"File must be ".concat(v(o.state.maxSizeBytes,r.Byte)," or smaller.");case"file-invalid-type":return"".concat(t.type," files are not allowed.");case"file-too-small":return"File size is too small.";case"too-many-files":return"Only one file is allowed.";default:return"Unexpected error. Please try again."}},o.delete=function(e){o.setState((function(t){var n=Object(i.a)(t.files).find((function(t){return t.id===e}));if(e&&n)return n.status=a.DELETING,n.errorMessage?(o.removeFile(e),null):(n.cancelToken&&n.cancelToken.cancel(),o.props.uploadClient.delete(o.props.element.id,e).then((function(){return o.removeFile(e)})),{files:t.files});return{status:a.ERROR,errorMessage:"File not found. Please try again."}}))},o.removeFile=function(e){o.setState((function(t){var n=t.files.filter((function(t){return t.id!==e}));return{status:n.length?a.UPLOADED:a.READY,errorMessage:void 0,files:n}}),(function(){return o.props.uploadClient.updateFileCount(o.props.element.id,o.state.files.length)}))},o.onUploadProgress=function(e,t){var n=Math.round(100*e.loaded/e.total),a=o.state.files.find((function(e){return e.id===t}));a&&a.progress!==n&&(a.progress=n,o.setState((function(e){return{files:e.files.map((function(e){return e.id===t?a:e}))}})))},o.render=function(){var e=o.state,t=e.maxSizeBytes,n=e.errorMessage,a=e.files,r=o.props,l=r.element,s=r.disabled,c=l.type;return u.a.createElement(Y,{"data-testid":"stFileUploader"},u.a.createElement(E.b,null,l.label),n?u.a.createElement(x.b,{kind:x.a.ERROR},n):null,u.a.createElement(K,{onDrop:o.dropHandler,multiple:l.multipleFiles,acceptedExtensions:c,maxSizeBytes:t,disabled:s}),u.a.createElement(oe,{items:Object(i.a)(a),pageSize:3,onDelete:o.delete,resetOnAdd:!0}))};var s=e.element.maxUploadSizeMb;return o.state={status:"READY",errorMessage:void 0,files:[],maxSizeBytes:h(s,r.MegaByte,r.Byte)},o}return n}(u.a.PureComponent);n.d(t,"default",(function(){return se}))}}]);
//# sourceMappingURL=29.4a243cb0.chunk.js.map